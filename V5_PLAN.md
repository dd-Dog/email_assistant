# V5.0 规划 - 基于上下文的精准AI分析

## 🎯 核心目标

**从通用AI分析 → 基于上下文的精准个性化分析**

让AI了解：
- 每个人的背景、技能、职责
- 每个项目的详情、状态、团队
- 邮件中的上下文关联

这样AI才能给出真正精准、有价值的分析和建议！

---

## 📋 V5.0 新增功能

### 1. 人员信息管理

#### 配置结构
```json
{
  "person_profiles": {
    "xiaozhengwei@szninetech.com": {
      "name": "肖正伟",
      "type": "customer",
      "company": "深圳九胜科技",
      "role": "技术总监",
      "skills": ["嵌入式开发", "Linux驱动", "音视频"],
      "experience_years": 10,
      "education": "硕士",
      "projects": ["项目A", "项目B"],
      "notes": "技术能力强，对质量要求高"
    },
    "yu.meng@unisoc.com": {
      "name": "孟瑜",
      "type": "supplier",
      "company": "紫光展锐",
      "role": "技术支持工程师",
      "skills": ["Modem开发", "网络协议", "射频"],
      "responsible_products": ["T310芯片", "T606芯片"],
      "notes": "负责Modem相关技术支持"
    },
    "chenqi@flyscale.cn": {
      "name": "陈琦",
      "type": "project_manager",
      "role": "项目经理",
      "skills": ["项目管理", "需求分析"],
      "experience_years": 8,
      "projects": ["G20项目", "889项目"],
      "responsibilities": "整机项目管理和客户对接",
      "notes": "善于协调资源"
    }
  }
}
```

### 2. 项目信息管理

#### 配置结构
```json
{
  "projects": {
    "G20": {
      "name": "G20整机项目",
      "status": "进行中",
      "customer": "客户A",
      "start_date": "2025-10-01",
      "deadline": "2025-12-31",
      "team_members": [
        "chenqi@flyscale.cn",
        "lichang@flyscale.cn",
        "xingpp@flyscale.cn"
      ],
      "tech_stack": ["Linux", "Android", "4G模组"],
      "current_phase": "测试阶段",
      "key_features": ["视频通话", "录音功能", "GPS定位"],
      "challenges": ["网络稳定性", "功耗优化"],
      "notes": "客户要求严格，注重质量"
    },
    "889": {
      "name": "889音频问题修复",
      "status": "bug修复",
      "priority": "high",
      "customer": "内部",
      "team_members": ["wangyx@flyscale.cn"],
      "issue_description": "录音声音小，通话质量差",
      "deadline": "2025-11-15",
      "notes": "已持续3天未解决"
    }
  }
}
```

### 3. 智能上下文关联

#### AI分析时自动注入上下文

**当分析客户邮件时：**
```
发件人信息：
- 肖正伟，深圳九胜科技技术总监
- 专长：嵌入式开发、音视频
- 负责项目：项目A、项目B
- 特点：技术能力强，对质量要求高

相关项目信息：
- 项目A：当前测试阶段，使用Android+4G
- 关键功能：视频通话、录音
- 当前挑战：网络稳定性

邮件内容：[客户需求]

请基于以上背景，分析此需求...
```

**AI的分析会更精准：**
- 知道客户的技术水平 → 调整建议深度
- 知道项目背景 → 给出更贴合的方案
- 知道当前挑战 → 关联已知问题

### 4. 智能项目识别

#### 邮件中提到项目时自动关联

**检测规则：**
- 主题或正文中包含项目名称
- 自动标注：`[项目: G20]`
- 在报告中显示项目信息

**示例：**
```
  2025-11-11 14:30 G20新装4台整机 [🟡普通] [项目:G20]
    📋 项目: G20整机项目 | 阶段:测试 | 负责人:陈琦
    💡 客户新装设备需要调试，当前项目在测试阶段
    🔧 建议: 联系李畅安排调试，注意网络稳定性测试
    ✓ 准备调试环境 | 联系李畅
```

### 5. 个性化建议生成

#### 基于人员能力和项目状态

**对技术能力强的客户：**
- 可以给出更技术性的方案
- 详细的实现细节
- 备选方案对比

**对技术较弱的客户：**
- 简化技术术语
- 强调效果和价值
- 提供可视化说明

**对不同项目阶段：**
- 需求阶段：重点分析可行性
- 开发阶段：重点关注技术实现
- 测试阶段：重点关注质量和时间

---

## 🏗️ V5.0 技术架构

### 新增模块

```python
person_manager.py        # 人员信息管理
project_manager.py       # 项目信息管理
context_builder.py       # 上下文构建器
smart_prompt_gen.py      # 智能提示词生成器
relation_detector.py     # 关系检测器（人员-项目关联）
```

### 数据结构

```python
# 人员Profile
class PersonProfile:
    - basic_info: 姓名、邮箱、公司
    - professional_info: 技能、经验、学历
    - work_info: 职责、负责项目
    - communication_style: 沟通风格、偏好
    - history: 历史邮件摘要

# 项目Profile  
class ProjectProfile:
    - basic_info: 名称、客户、状态
    - timeline: 开始、截止、里程碑
    - team: 成员列表
    - technical: 技术栈、功能、挑战
    - history: 项目邮件历史
```

### AI提示词构建流程

```
1. 接收邮件
   ↓
2. 识别发件人 → 加载人员Profile
   ↓
3. 检测提到的项目 → 加载项目Profile
   ↓
4. 构建上下文信息
   ↓
5. 生成个性化提示词
   ↓
6. 调用AI分析
   ↓
7. 结果融合上下文
```

---

## 📝 配置文件设计

### profiles.json（新增）
```json
{
  "persons": {
    "email@company.com": {
      "name": "姓名",
      "type": "customer/supplier/leader/pm/employee",
      "profile": {
        // 详细信息
      }
    }
  },
  "projects": {
    "project_code": {
      "name": "项目名称",
      "info": {
        // 详细信息
      }
    }
  },
  "project_keywords": {
    "G20": "G20",
    "889": "889",
    "8088": "8088"
  }
}
```

### 优点
- 配置分离：邮箱配置 vs 详细信息
- 易于维护：添加新人/项目很简单
- 隐私保护：profiles.json不提交到Git

---

## 🎯 V5.0 预期效果

### 对客户需求

**V4.0（通用分析）：**
```
📝 需求: 客户要求增加视频录制功能
⚙️ 可行性: 技术可行，需要增加存储和编码器
🔧 实现: 增加存储模块 | 集成编码器 | 开发接口
💡 建议: 先确认视频质量要求
```

**V5.0（精准分析）：**
```
📝 需求: 肖正伟（深圳九胜技术总监）要求在项目A中增加视频录制
⚙️ 可行性: 可行。肖总有嵌入式背景，可以讨论技术细节
🔧 实现: 
   基于项目A当前的Android系统：
   1. 使用MediaRecorder API（现有框架已支持）
   2. 32GB存储可录制约8小时720P
   3. 利用现有的音视频模块，工作量约1周
💡 建议: 
   考虑到项目A当前的网络稳定性挑战，建议：
   - 视频录制与网络功能解耦
   - 提供本地存储+云端上传两种模式
   与肖总沟通时，可提出存储空间和清晰度的平衡方案
✓ 今天回复并附技术方案 | 提及现有音视频基础
📅 本周五前（项目A测试阶段，需要快速响应）
```

**差异：**
- 知道客户的技术背景
- 知道项目的技术栈和现状
- 给出更具体的工作量估算
- 建议考虑了项目现有挑战
- 沟通建议更有针对性

---

## 💡 实现策略

### Phase 1: 数据模型（1周）
- 设计人员和项目的数据结构
- 创建配置文件模板
- 实现加载和管理模块

### Phase 2: 上下文构建（1周）
- 实现人员信息查询
- 实现项目信息查询
- 邮件内容中的项目识别
- 上下文信息整合

### Phase 3: 智能提示词（1周）
- 基于人员类型生成提示词
- 注入人员背景信息
- 注入项目上下文
- 个性化分析要求

### Phase 4: 结果优化（1周）
- AI结果与上下文融合
- 个性化建议生成
- 报告格式优化
- 测试和调优

---

## 🔮 V5.0 之后的展望

### V6.0 - 自动回复
- 基于分析结果生成回复草稿
- 针对不同人员的沟通风格
- 用户确认后自动发送

### V7.0 - 主动学习
- 从历史邮件学习
- 自动完善人员和项目信息
- 预测客户需求
- 风险早期预警

---

## 📊 价值评估

### V4.0价值
- 节省70%的邮件阅读时间
- 提供基础的可行性分析

### V5.0预期价值
- 节省**90%**的邮件分析时间
- 分析准确度提升**50%**
- 建议的可执行性提升**80%**
- 响应速度提升**100%**（因为建议更具体）

### ROI
- 开发时间：4周
- 每天节省时间：1-2小时
- AI成本增加：约20%（$0.15/月 → $0.18/月）
- **完全值得！**

---

## ✅ 下一步行动

### 立即可做
1. 开始收集人员信息
2. 整理项目列表
3. 定义项目关键词

### V5.0开发启动
1. 创建profiles.json模板
2. 实现基础的加载机制
3. 逐步完善功能

---

**V5.0将是质的飞跃 - 从工具到真正的智能助理！** 🚀

